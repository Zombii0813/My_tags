# 文件管理与分类软件 — 开发计划文档（Windows / Python）

## 1. 项目目标与范围
- **目标**：提供一款 Windows 平台上的文件管理与分类工具，以“工作空间目录”为核心，支持自定义标签、批量管理文件。
- **范围**：
  - 管理图片、视频、文档、音频等常见文件类型
  - 支持多标签（同一文件可同时拥有多个标签）
  - 提供批量操作、快速筛选与检索能力
  - 支持可视化管理与预览

## 2. 核心功能设计

### 2.1 工作空间
- 指定一个目录作为工作空间
- 软件只对工作空间内的文件进行扫描与管理
- 支持多工作空间（可选，后续版本）

### 2.2 文件扫描与索引
- 首次进入工作空间时进行全量扫描
- 后续增量更新（监听文件变动）
- 索引内容包括：
  - 文件路径、名称、大小、类型、修改时间
  - 文件哈希（可用于去重与一致性校验）

### 2.3 标签体系
- 标签可自定义（支持颜色、描述）
- 同一文件可添加多个标签
- 标签支持批量操作：
  - 批量添加
  - 批量移除
  - 批量替换
- 标签支持导入导出（可选）

### 2.4 分类与筛选
- 按文件类型分类（图片、视频、文档、音频、其他）
- 按标签筛选（支持多标签交集/并集模式）
- 按文件属性筛选（大小区间、时间范围等）

### 2.5 操作与管理
- 批量移动/复制/删除
- 批量重命名
- 快速定位（打开文件夹 / 打开文件）
- 文件预览（图片/视频缩略图、文档基本信息）

### 2.6 搜索功能
- 按文件名模糊搜索
- 按标签搜索
- 支持组合条件搜索

## 3. 技术选型

### 3.1 开发语言与平台
- **语言**：Python 3.10+
- **平台**：Windows 10/11

### 3.2 桌面 GUI 框架（建议方案）
- **主推荐**：PySide6（Qt for Python）
  - 界面成熟、组件丰富、支持多线程
- 备选：PyQt5 / Tkinter（复杂 UI 不如 Qt）

### 3.3 数据存储
- **SQLite**（内置、轻量级、无需服务器）
- ORM：SQLAlchemy 或直接 SQLite 原生访问

### 3.4 文件监听与索引
- **watchdog**（文件变更监听）
- 后台扫描线程（避免阻塞 UI）

### 3.5 其他
- **Pillow**：图片缩略图生成
- **ffmpeg**（可选）：视频缩略图生成
- **hashlib**：文件哈希计算

## 4. 结构设计

### 4.1 主要模块划分
- `core/`：核心逻辑（索引、标签、分类）
- `db/`：数据库管理与模型
- `ui/`：界面组件
- `services/`：后台服务（扫描、监听）
- `utils/`：工具模块（哈希、文件类型判断）

### 4.2 数据库结构（初步）
- **files**
  - id, path, name, size, type, hash, created_at, updated_at
- **tags**
  - id, name, color, created_at
- **file_tags**
  - file_id, tag_id

## 5. 运行环境与依赖

### 5.1 开发环境
- Windows 10/11
- Python 3.10+
- 推荐使用 venv

### 5.2 主要依赖
- PySide6
- watchdog
- SQLAlchemy 或 sqlite3
- Pillow
- ffmpeg（可选）

## 6. 初版 MVP 范围（建议优先实现）
1. 选择工作空间并扫描索引
2. 标签增删改 + 多标签绑定
3. 基础筛选（按标签、类型）
4. 批量操作（移动/删除）
5. 基础预览（图片缩略图）

## 7. 后续版本可扩展功能
- 多工作空间管理
- 文件去重与重复文件提示
- AI 自动分类（图片/文档内容识别）
- 云同步或导出标签方案
- 规则自动打标签

## 8. 开发阶段建议
- **阶段一**：项目结构搭建 + 数据模型
- **阶段二**：索引与标签逻辑
- **阶段三**：UI 界面与交互
- **阶段四**：批量操作 + 搜索筛选
- **阶段五**：优化与扩展功能

